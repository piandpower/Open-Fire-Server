{% extends "layout.html" %}
{% block body %}
<title>World map</title>

<div id="container">
    <style>
        #graph-container
        {
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            position: absolute;
        }
    </style>
    <div id="graph-container"></div>
</div>

<script src="static/sigma.js-v1.0.3/sigma.min.js"></script>
<script>
    var i;
    var g =
    {
      nodes: [],
      edges: []
    };

    {% for node in nodes %}
        g.nodes.push(
        {
            id: '{{ node.node_id }}',
            label: '{{ node.name }}',
            x: {{ node.position_x }},
            y: {{ node.position_y }},
            size: 5
        });
    {% endfor %}

    {% for edge in edges %}
        g.edges.push(
        {
            id: '{{ edge.start_node_id }}-{{ edge.end_node_id }}',
            source: '{{ edge.start_node_id }}',
            target: '{{ edge.end_node_id }}',
            size: 5
        });
    {% endfor %}


    var s = new sigma(
    {
        graph: g,
        container: 'graph-container'
    });

    s.bind('clickNode', function(element)
    {
        console.log(element.data.node.id)
    })
</script>
{% endblock %}
